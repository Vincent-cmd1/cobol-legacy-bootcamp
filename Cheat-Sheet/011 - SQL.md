# SQL Cheat Sheet

## üîç Requ√™tes de base (SELECT)

### S√©lection de colonnes sp√©cifiques
```sql
SELECT column1, column2, column3
FROM table_name;
```

### S√©lection de toutes les colonnes
```sql
SELECT * 
FROM table_name;
```

### S√©lection avec alias
```sql
SELECT column1 AS alias1, column2 AS alias2
FROM table_name AS t;
```

## üìã Filtres et conditions (WHERE)

### Op√©rateurs num√©riques
| Op√©rateur | Description | Exemple |
|-----------|-------------|---------|
| `=`, `!=`, `<>` | √âgalit√©/In√©galit√© | `age = 25` |
| `<`, `<=`, `>`, `>=` | Comparaisons | `price > 100` |
| `BETWEEN ... AND ...` | Dans une plage | `age BETWEEN 18 AND 65` |
| `NOT BETWEEN ... AND ...` | Hors d'une plage | `price NOT BETWEEN 10 AND 50` |
| `IN (...)` | Dans une liste | `id IN (1, 2, 3)` |
| `NOT IN (...)` | Pas dans une liste | `status NOT IN ('pending', 'cancelled')` |

### Op√©rateurs de texte
| Op√©rateur | Description | Exemple |
|-----------|-------------|---------|
| `=` | Comparaison exacte (sensible √† la casse) | `name = 'John'` |
| `!=`, `<>` | In√©galit√© exacte | `name != 'John'` |
| `LIKE` | Comparaison avec motifs | `name LIKE 'J%'` |
| `NOT LIKE` | Exclusion avec motifs | `name NOT LIKE '%admin%'` |
| `%` | Z√©ro ou plusieurs caract√®res | `'%cat%'` (trouve "cat", "cats", "scatter") |
| `_` | Un seul caract√®re | `'c_t'` (trouve "cat", "cut" mais pas "cart") |

### Valeurs NULL
```sql
SELECT * FROM table_name 
WHERE column IS NULL;

SELECT * FROM table_name 
WHERE column IS NOT NULL;
```

### Combinaison de conditions
```sql
SELECT * FROM products 
WHERE price > 50 
  AND category = 'electronics' 
  OR brand IN ('Apple', 'Samsung');
```

## üîÑ Tri et limitation (ORDER BY, LIMIT)

### Tri des r√©sultats
```sql
-- Tri croissant
SELECT * FROM products ORDER BY price ASC;

-- Tri d√©croissant
SELECT * FROM products ORDER BY price DESC;

-- Tri multiple
SELECT * FROM products ORDER BY category ASC, price DESC;
```

### Limitation des r√©sultats
```sql
-- Limiter √† 10 r√©sultats
SELECT * FROM products LIMIT 10;

-- Pagination (ignorer les 20 premiers, prendre les 10 suivants)
SELECT * FROM products LIMIT 10 OFFSET 20;
```

## üîó Jointures (JOINS)

### INNER JOIN
```sql
SELECT t1.column1, t2.column2
FROM table1 t1
INNER JOIN table2 t2 ON t1.id = t2.table1_id;
```
*Retourne uniquement les lignes qui ont une correspondance dans les deux tables*

### LEFT JOIN (LEFT OUTER JOIN)
```sql
SELECT t1.column1, t2.column2
FROM table1 t1
LEFT JOIN table2 t2 ON t1.id = t2.table1_id;
```
*Retourne toutes les lignes de la table de gauche + les correspondances de droite*

### RIGHT JOIN (RIGHT OUTER JOIN)
```sql
SELECT t1.column1, t2.column2
FROM table1 t1
RIGHT JOIN table2 t2 ON t1.id = t2.table1_id;
```
*Retourne toutes les lignes de la table de droite + les correspondances de gauche*

### FULL JOIN (FULL OUTER JOIN)
```sql
SELECT t1.column1, t2.column2
FROM table1 t1
FULL JOIN table2 t2 ON t1.id = t2.table1_id;
```
*Retourne toutes les lignes des deux tables*

## üéØ R√©sultats uniques et doublons

### DISTINCT
```sql
SELECT DISTINCT category FROM products;

-- Avec plusieurs colonnes
SELECT DISTINCT category, brand FROM products;
```

## üßÆ Expressions et fonctions

### Expressions math√©matiques
```sql
SELECT 
    product_name,
    price,
    price * 1.20 AS price_with_tax,
    ROUND(price * 0.8, 2) AS discounted_price
FROM products;
```

### Fonctions courantes
```sql
-- Fonctions de cha√Æne
SELECT 
    UPPER(name) AS name_upper,
    LOWER(email) AS email_lower,
    LENGTH(description) AS desc_length,
    CONCAT(first_name, ' ', last_name) AS full_name
FROM users;

-- Fonctions de date
SELECT 
    CURRENT_DATE(),
    YEAR(created_at) AS creation_year,
    DATEDIFF(CURRENT_DATE(), birth_date) AS age_days
FROM users;

-- Fonctions math√©matiques
SELECT 
    ABS(temperature) AS abs_temp,
    ROUND(price, 2) AS rounded_price,
    CEIL(rating) AS rating_ceil,
    FLOOR(rating) AS rating_floor
FROM measurements;
```

## üìä Structure de requ√™te compl√®te

```sql
SELECT DISTINCT column1, column2, expression AS alias
FROM table1 t1
INNER JOIN table2 t2 ON t1.id = t2.foreign_key
WHERE condition1 
  AND condition2 
  OR condition3
ORDER BY column1 ASC, column2 DESC
LIMIT number OFFSET number;
```

## üîÑ Ordre d'ex√©cution SQL

1. **FROM** - S√©lection des tables
2. **JOIN** - Jointure des tables
3. **WHERE** - Filtrage des lignes
4. **GROUP BY** - Regroupement
5. **HAVING** - Filtrage des groupes
6. **SELECT** - S√©lection des colonnes
7. **DISTINCT** - Suppression des doublons
8. **ORDER BY** - Tri des r√©sultats
9. **LIMIT/OFFSET** - Limitation des r√©sultats

## üí° Bonnes pratiques

### Conventions de nommage
- **Mots-cl√©s SQL** en MAJUSCULES : `SELECT`, `FROM`, `WHERE`
- **Noms de tables/colonnes** en minuscules
- Utiliser des **alias** pour les noms longs
- **Indenter** pour la lisibilit√©

### Exemple bien format√©
```sql
SELECT 
    p.product_name,
    p.price,
    c.category_name,
    COUNT(o.id) AS total_orders
FROM products p
INNER JOIN categories c ON p.category_id = c.id
LEFT JOIN orders o ON p.id = o.product_id
WHERE p.price > 10
  AND c.active = 1
GROUP BY p.id, p.product_name, p.price, c.category_name
HAVING COUNT(o.id) > 5
ORDER BY total_orders DESC, p.price ASC
LIMIT 20;
```

### Gestion des performances
- Utiliser `WHERE` pour filtrer avant les jointures
- Limiter les r√©sultats avec `LIMIT` quand possible
- √âviter `SELECT *` en production
- Indexer les colonnes utilis√©es dans `WHERE` et `JOIN`

### Gestion des NULL
- Toujours tester les valeurs NULL explicitement
- Consid√©rer des valeurs par d√©faut plut√¥t que NULL
- Attention aux jointures externes qui peuvent introduire des NULL

## üéØ Cas d'usage courants

### Recherche avec motifs
```sql
-- Recherche flexible
SELECT * FROM users 
WHERE name LIKE '%john%' 
   OR email LIKE '%john%';
```

### Top N des r√©sultats
```sql
-- Les 5 produits les plus chers
SELECT * FROM products 
ORDER BY price DESC 
LIMIT 5;
```

### V√©rification d'existence
```sql
-- Produits sans commandes
SELECT p.* FROM products p
LEFT JOIN orders o ON p.id = o.product_id
WHERE o.id IS NULL;
```
